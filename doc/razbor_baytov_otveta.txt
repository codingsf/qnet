ошибку исправил - проверяйте!!!

щаааа

теперь вопрос - это ошибка не исправилась, или я пакеты не фильтрую...

пакеты нада фильтровать
ща проект загрузится - посмотрим, фильтрую ли я их...

Ага, я их чистоганом отрисовываю....

Можно ещё раз по байтам?

0,1 - рнд
2 - калибровка
3 - ДФ

т.е. по 4 байта?

да все кратно 32 битам
ок. Хотя стоп, я же вроде как должен был уже это делать...

да, разбор на байты делал, а вот отброс калибровочных пакетов - нет. Ну что ж, тогда буду писать фильтрацию, завтра вечером проверять!
Спасибо!

как вариант можно выбрасывать все слово если байт калибровки не равен нулю
и еще можно диагностику делать - если 1 в байте калибровки перемежаются с нулями - то значит какая-то лажа
имеется в виду что должна быть последовательность 0001111 или 1110000 и не может быть 10011001 и подобного

ок. А зачем мы вообще вводили калибровочные посылки, если мы можем считывать калибровку сами в любой момент?

чтобы не нарушать стройность считывания данных - не прерывать на время калибровки, и соответственно выкидыывать из обработки лишнее

т.е. в теории, я должен забирать график калибровки из dma-данных?

нет, можно просто выкидывать данные помеченные битом калибровки
теоретически можно по данным во время калибровки восстановить таблицу распределения фотонов и повторить калибровку в компе (но вот нада ли:)

в том-то и дело, что мы сейчас по прерыванию калибровки считываем всю таблицу результата калибровки, обсчитываем её новым хитрым алгоритмом и записываем свой результат обратно в плату...

разница только в синхронизации - по прерыванию вы сразу же получаете сигнал когда можно обновлять данные по результатам калибровки
при анализе данных из ДМА нет привязки ко времени (есть неопределнная составляющая в задержке - память-> ДМА->  обработка под виндами)

Тогда прежний вопрос - зачем вообще включать в ДМА калибровочные данные, если мы их оттуда никогда не берем и только выкидываем*?

чтобы платы работали абсолютно синхронно - как только прошел старт обе платы работают синхронно и если их прерывать на калибровку платы могут рассинхронизироваться (на один а то и больше тактов из-за неодновременного включения калибровки)

понял. Тогда другой вопрос: нам когда-либо может потребоваться полностью сырой поток ДМА для отладки? Или можно на этапе чтения сразу же выкидывать метки+калибровку?

метки времени могут потребоваться при отладке синхронизации двух плат (и для контроля что ничего не теряем в данных)
в боевом софте по меткам времени производится сопоставление (синхронизация) кусков данных - это особенно важно при потоковой обработке когда комп производит вычисления и выкидывает данные которые не успевает обработать


ок. Тогда метки оставляю, а калибровку убиваю.

да, она не нужна

ок, спасибо!

в алисе такая же ошибка - надо перекомпилировать

океееее

как бы мне новую версию утянуть? 

эм... т.е.?

ну исходники... они в облаке? или надо какие-то дополнительные действия делать?

Облако в users\xe\Documents\Cloud@mail.ru, потом надо щелкнуть правой кнопокой по папке и выбрать "скопировать публичную ссыль", а её уже отправить вам.

наверное проще затянуть через "передачу файлов" в тимвьювере

ок

готово. заливать алиску бум? и надо наверное новые прошвки куда-нить скопировать
ща Вова переключит байт бластер в алису, а я пока открою место для прошивок

готово

бластер в алиске?

ага

ребут алисе
ага...

почти загрузилась

только вот вопрос, как её проверять.

ну, дма прерывания с неё идут

ну посмотреть есть ли калибровочные биты в потоке и собсна все

в потоке только чистое РНД, без единого бита постороннег

эт плохо ща посмотрим

почему плохо?

есть ещё нули от детектора

нули от детектора это нормально - в алисе ;)
ребут алиске

приветствие...
почти загрузилась...

должно быть окее
иногда проскакивает 2A

чё то я не увидел 2 исключительно АААА

ну, возможно это были метки

тогда надо соф переписать

переписал

к себе забрать копию алисы?

да я уже

тогда всё?
согласен

удачи!

спасибо!





должны быть калиброво

reboot alice

reboot'ится

приветствие...

о, фигня какая-то начала проскакивать...

попутал полярность калибровки


